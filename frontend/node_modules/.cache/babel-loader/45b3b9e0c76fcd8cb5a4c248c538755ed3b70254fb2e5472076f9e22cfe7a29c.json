{"ast":null,"code":"import _inherits from \"C:/Users/rajde/gitrep/deploy/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/rajde/gitrep/deploy/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _classCallCheck from \"C:/Users/rajde/gitrep/deploy/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/rajde/gitrep/deploy/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { SessionData } from './sessionData';\nimport { LOCALSTORAGE_SESSION_KEY } from './constants';\nimport { NoSessionDataError } from '@stacks/common';\nexport var SessionDataStore = /*#__PURE__*/function () {\n  function SessionDataStore(sessionOptions) {\n    _classCallCheck(this, SessionDataStore);\n    if (sessionOptions) {\n      var newSessionData = new SessionData(sessionOptions);\n      this.setSessionData(newSessionData);\n    }\n  }\n  _createClass(SessionDataStore, [{\n    key: \"getSessionData\",\n    value: function getSessionData() {\n      throw new Error('Abstract class');\n    }\n  }, {\n    key: \"setSessionData\",\n    value: function setSessionData(_session) {\n      throw new Error('Abstract class');\n    }\n  }, {\n    key: \"deleteSessionData\",\n    value: function deleteSessionData() {\n      throw new Error('Abstract class');\n    }\n  }]);\n  return SessionDataStore;\n}();\nexport var InstanceDataStore = /*#__PURE__*/function (_SessionDataStore) {\n  _inherits(InstanceDataStore, _SessionDataStore);\n  var _super = _createSuper(InstanceDataStore);\n  function InstanceDataStore(sessionOptions) {\n    var _this;\n    _classCallCheck(this, InstanceDataStore);\n    _this = _super.call(this, sessionOptions);\n    if (!_this.sessionData) {\n      _this.setSessionData(new SessionData({}));\n    }\n    return _this;\n  }\n  _createClass(InstanceDataStore, [{\n    key: \"getSessionData\",\n    value: function getSessionData() {\n      if (!this.sessionData) {\n        throw new NoSessionDataError('No session data was found.');\n      }\n      return this.sessionData;\n    }\n  }, {\n    key: \"setSessionData\",\n    value: function setSessionData(session) {\n      this.sessionData = session;\n      return true;\n    }\n  }, {\n    key: \"deleteSessionData\",\n    value: function deleteSessionData() {\n      this.setSessionData(new SessionData({}));\n      return true;\n    }\n  }]);\n  return InstanceDataStore;\n}(SessionDataStore);\nexport var LocalStorageStore = /*#__PURE__*/function (_SessionDataStore2) {\n  _inherits(LocalStorageStore, _SessionDataStore2);\n  var _super2 = _createSuper(LocalStorageStore);\n  function LocalStorageStore(sessionOptions) {\n    var _this2;\n    _classCallCheck(this, LocalStorageStore);\n    _this2 = _super2.call(this, sessionOptions);\n    if (sessionOptions && sessionOptions.storeOptions && sessionOptions.storeOptions.localStorageKey && typeof sessionOptions.storeOptions.localStorageKey === 'string') {\n      _this2.key = sessionOptions.storeOptions.localStorageKey;\n    } else {\n      _this2.key = LOCALSTORAGE_SESSION_KEY;\n    }\n    var data = localStorage.getItem(_this2.key);\n    if (!data) {\n      var sessionData = new SessionData({});\n      _this2.setSessionData(sessionData);\n    }\n    return _this2;\n  }\n  _createClass(LocalStorageStore, [{\n    key: \"getSessionData\",\n    value: function getSessionData() {\n      var data = localStorage.getItem(this.key);\n      if (!data) {\n        throw new NoSessionDataError('No session data was found in localStorage');\n      }\n      var dataJSON = JSON.parse(data);\n      return SessionData.fromJSON(dataJSON);\n    }\n  }, {\n    key: \"setSessionData\",\n    value: function setSessionData(session) {\n      localStorage.setItem(this.key, session.toString());\n      return true;\n    }\n  }, {\n    key: \"deleteSessionData\",\n    value: function deleteSessionData() {\n      localStorage.removeItem(this.key);\n      this.setSessionData(new SessionData({}));\n      return true;\n    }\n  }]);\n  return LocalStorageStore;\n}(SessionDataStore);","map":{"version":3,"names":["SessionData","LOCALSTORAGE_SESSION_KEY","NoSessionDataError","SessionDataStore","sessionOptions","_classCallCheck","newSessionData","setSessionData","_createClass","key","value","getSessionData","Error","_session","deleteSessionData","InstanceDataStore","_SessionDataStore","_inherits","_super","_createSuper","_this","call","sessionData","session","LocalStorageStore","_SessionDataStore2","_super2","_this2","storeOptions","localStorageKey","data","localStorage","getItem","dataJSON","JSON","parse","fromJSON","setItem","toString","removeItem"],"sources":["C:\\Users\\rajde\\gitrep\\deploy\\frontend\\node_modules\\@stacks\\auth\\src\\sessionStore.ts"],"sourcesContent":["import { SessionData, SessionOptions } from './sessionData';\nimport { LOCALSTORAGE_SESSION_KEY } from './constants';\nimport { NoSessionDataError } from '@stacks/common';\n\n/**\n * An abstract class representing the SessionDataStore interface.\n\n */\nexport class SessionDataStore {\n  constructor(sessionOptions?: SessionOptions) {\n    if (sessionOptions) {\n      const newSessionData = new SessionData(sessionOptions);\n      this.setSessionData(newSessionData);\n    }\n  }\n\n  getSessionData(): SessionData {\n    throw new Error('Abstract class');\n  }\n\n  // TODO: fix, not used?\n  setSessionData(_session: SessionData): boolean {\n    throw new Error('Abstract class');\n  }\n\n  deleteSessionData(): boolean {\n    throw new Error('Abstract class');\n  }\n}\n\n/**\n * Stores session data in the instance of this class.\n * @ignore\n */\nexport class InstanceDataStore extends SessionDataStore {\n  sessionData?: SessionData;\n\n  constructor(sessionOptions?: SessionOptions) {\n    super(sessionOptions);\n    if (!this.sessionData) {\n      this.setSessionData(new SessionData({}));\n    }\n  }\n\n  getSessionData(): SessionData {\n    if (!this.sessionData) {\n      throw new NoSessionDataError('No session data was found.');\n    }\n    return this.sessionData;\n  }\n\n  setSessionData(session: SessionData): boolean {\n    this.sessionData = session;\n    return true;\n  }\n\n  deleteSessionData(): boolean {\n    this.setSessionData(new SessionData({}));\n    return true;\n  }\n}\n\n/**\n * Stores session data in browser a localStorage entry.\n * @ignore\n */\nexport class LocalStorageStore extends SessionDataStore {\n  key: string;\n\n  constructor(sessionOptions?: SessionOptions) {\n    super(sessionOptions);\n    if (\n      sessionOptions &&\n      sessionOptions.storeOptions &&\n      sessionOptions.storeOptions.localStorageKey &&\n      typeof sessionOptions.storeOptions.localStorageKey === 'string'\n    ) {\n      this.key = sessionOptions.storeOptions.localStorageKey;\n    } else {\n      this.key = LOCALSTORAGE_SESSION_KEY;\n    }\n\n    const data = localStorage.getItem(this.key);\n    if (!data) {\n      const sessionData = new SessionData({});\n      this.setSessionData(sessionData);\n    }\n  }\n\n  getSessionData(): SessionData {\n    const data = localStorage.getItem(this.key);\n    if (!data) {\n      throw new NoSessionDataError('No session data was found in localStorage');\n    }\n    const dataJSON = JSON.parse(data);\n    return SessionData.fromJSON(dataJSON);\n  }\n\n  setSessionData(session: SessionData): boolean {\n    localStorage.setItem(this.key, session.toString());\n    return true;\n  }\n\n  deleteSessionData(): boolean {\n    localStorage.removeItem(this.key);\n    this.setSessionData(new SessionData({}));\n    return true;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}