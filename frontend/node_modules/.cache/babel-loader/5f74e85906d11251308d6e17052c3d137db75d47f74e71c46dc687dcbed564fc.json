{"ast":null,"code":"import { resolveZoneFileToProfile } from '@stacks/profile';\nimport { StacksMainnet, StacksNetwork } from '@stacks/network';\nexport function lookupProfile(lookupOptions) {\n  if (!lookupOptions.username) {\n    return Promise.reject(new Error('No username provided'));\n  }\n  var defaultOptions = {\n    network: new StacksMainnet()\n  };\n  var options = Object.assign(defaultOptions, lookupOptions);\n  var network = StacksNetwork.fromNameOrNetwork(options.network);\n  var lookupPromise;\n  if (options.zoneFileLookupURL) {\n    var url = \"\".concat(options.zoneFileLookupURL.replace(/\\/$/, ''), \"/\").concat(options.username);\n    lookupPromise = network.fetchFn(url).then(function (response) {\n      return response.json();\n    });\n  } else {\n    lookupPromise = network.getNameInfo(options.username);\n  }\n  return lookupPromise.then(function (responseJSON) {\n    if (responseJSON.hasOwnProperty('zonefile') && responseJSON.hasOwnProperty('address')) {\n      return resolveZoneFileToProfile(responseJSON.zonefile, responseJSON.address, network.fetchFn);\n    } else {\n      throw new Error('Invalid zonefile lookup response: did not contain `address`' + ' or `zonefile` field');\n    }\n  });\n}","map":{"version":3,"names":["resolveZoneFileToProfile","StacksMainnet","StacksNetwork","lookupProfile","lookupOptions","username","Promise","reject","Error","defaultOptions","network","options","Object","assign","fromNameOrNetwork","lookupPromise","zoneFileLookupURL","url","concat","replace","fetchFn","then","response","json","getNameInfo","responseJSON","hasOwnProperty","zonefile","address"],"sources":["C:\\Users\\rajde\\gitrep\\deploy\\frontend\\node_modules\\@stacks\\auth\\src\\profile.ts"],"sourcesContent":["import { resolveZoneFileToProfile } from '@stacks/profile';\nimport { StacksMainnet, StacksNetwork, StacksNetworkName } from '@stacks/network';\n\nexport interface ProfileLookupOptions {\n  username: string;\n  zoneFileLookupURL?: string;\n  network?: StacksNetworkName | StacksNetwork;\n}\n\n/**\n * Look up a user profile by blockstack ID\n *\n * @param {string} username - The Blockstack ID of the profile to look up\n * @param {string} [zoneFileLookupURL=null] - The URL\n * to use for zonefile lookup. If falsey, lookupProfile will use the\n * blockstack.js [[getNameInfo]] function.\n * @returns {Promise} that resolves to a profile object\n */\nexport function lookupProfile(lookupOptions: ProfileLookupOptions): Promise<Record<string, any>> {\n  if (!lookupOptions.username) {\n    return Promise.reject(new Error('No username provided'));\n  }\n\n  const defaultOptions = {\n    network: new StacksMainnet(),\n  };\n  const options = Object.assign(defaultOptions, lookupOptions);\n\n  const network = StacksNetwork.fromNameOrNetwork(options.network);\n  let lookupPromise;\n  if (options.zoneFileLookupURL) {\n    const url = `${options.zoneFileLookupURL.replace(/\\/$/, '')}/${options.username}`;\n    lookupPromise = network.fetchFn(url).then(response => response.json());\n  } else {\n    lookupPromise = network.getNameInfo(options.username);\n  }\n  return lookupPromise.then((responseJSON: any) => {\n    if (responseJSON.hasOwnProperty('zonefile') && responseJSON.hasOwnProperty('address')) {\n      return resolveZoneFileToProfile(responseJSON.zonefile, responseJSON.address, network.fetchFn);\n    } else {\n      throw new Error(\n        'Invalid zonefile lookup response: did not contain `address`' + ' or `zonefile` field'\n      );\n    }\n  });\n}\n"],"mappings":"AAAA,SAASA,wBAAwB,QAAQ,iBAAiB;AAC1D,SAASC,aAAa,EAAEC,aAAa,QAA2B,iBAAiB;AAiBjF,OAAM,SAAUC,aAAaA,CAACC,aAAmC;EAC/D,IAAI,CAACA,aAAa,CAACC,QAAQ,EAAE;IAC3B,OAAOC,OAAO,CAACC,MAAM,CAAC,IAAIC,KAAK,CAAC,sBAAsB,CAAC,CAAC;;EAG1D,IAAMC,cAAc,GAAG;IACrBC,OAAO,EAAE,IAAIT,aAAa;GAC3B;EACD,IAAMU,OAAO,GAAGC,MAAM,CAACC,MAAM,CAACJ,cAAc,EAAEL,aAAa,CAAC;EAE5D,IAAMM,OAAO,GAAGR,aAAa,CAACY,iBAAiB,CAACH,OAAO,CAACD,OAAO,CAAC;EAChE,IAAIK,aAAa;EACjB,IAAIJ,OAAO,CAACK,iBAAiB,EAAE;IAC7B,IAAMC,GAAG,MAAAC,MAAA,CAAMP,OAAO,CAACK,iBAAiB,CAACG,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,OAAAD,MAAA,CAAIP,OAAO,CAACN,QAAQ,CAAE;IACjFU,aAAa,GAAGL,OAAO,CAACU,OAAO,CAACH,GAAG,CAAC,CAACI,IAAI,CAAC,UAAAC,QAAQ;MAAA,OAAIA,QAAQ,CAACC,IAAI,EAAE;IAAA,EAAC;GACvE,MAAM;IACLR,aAAa,GAAGL,OAAO,CAACc,WAAW,CAACb,OAAO,CAACN,QAAQ,CAAC;;EAEvD,OAAOU,aAAa,CAACM,IAAI,CAAC,UAACI,YAAiB,EAAI;IAC9C,IAAIA,YAAY,CAACC,cAAc,CAAC,UAAU,CAAC,IAAID,YAAY,CAACC,cAAc,CAAC,SAAS,CAAC,EAAE;MACrF,OAAO1B,wBAAwB,CAACyB,YAAY,CAACE,QAAQ,EAAEF,YAAY,CAACG,OAAO,EAAElB,OAAO,CAACU,OAAO,CAAC;KAC9F,MAAM;MACL,MAAM,IAAIZ,KAAK,CACb,6DAA6D,GAAG,sBAAsB,CACvF;;EAEL,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}