{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodeToken = void 0;\nvar base64url = require(\"./base64Url\");\nfunction decodeToken(token) {\n  if (typeof token === 'string') {\n    // decompose the token into parts\n    var tokenParts = token.split('.');\n    var header = JSON.parse(base64url.decode(tokenParts[0]));\n    var payload = JSON.parse(base64url.decode(tokenParts[1]));\n    var signature = tokenParts[2];\n    // return the token object\n    return {\n      header: header,\n      payload: payload,\n      signature: signature\n    };\n  } else if (typeof token === 'object') {\n    if (typeof token.payload !== 'string') {\n      throw new Error('Expected token payload to be a base64 or json string');\n    }\n    var _payload = token.payload;\n    if (token.payload[0] !== '{') {\n      _payload = base64url.decode(_payload);\n    }\n    var allHeaders = [];\n    token.header.map(function (headerValue) {\n      var header = JSON.parse(base64url.decode(headerValue));\n      allHeaders.push(header);\n    });\n    return {\n      header: allHeaders,\n      payload: JSON.parse(_payload),\n      signature: token.signature\n    };\n  }\n}\nexports.decodeToken = decodeToken;","map":{"version":3,"names":["base64url","require","decodeToken","token","tokenParts","split","header","JSON","parse","decode","payload","signature","Error","allHeaders","map","headerValue","push","exports"],"sources":["decode.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AAsBA,SAAgBC,WAAWA,CAACC,KAA8B;EACxD,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B;IACA,IAAMC,UAAU,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC;IACnC,IAAMC,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACR,SAAS,CAACS,MAAM,CAACL,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1D,IAAMM,OAAO,GAAGH,IAAI,CAACC,KAAK,CAACR,SAAS,CAACS,MAAM,CAACL,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3D,IAAMO,SAAS,GAAGP,UAAU,CAAC,CAAC,CAAC;IAE/B;IACA,OAAO;MACLE,MAAM,EAAEA,MAAM;MACdI,OAAO,EAAEA,OAAO;MAChBC,SAAS,EAAEA;KACZ;GACF,MAAM,IAAI,OAAOR,KAAK,KAAK,QAAQ,EAAE;IACpC,IAAI,OAAOA,KAAK,CAACO,OAAO,KAAK,QAAQ,EAAE;MACrC,MAAM,IAAIE,KAAK,CAAC,sDAAsD,CAAC;;IAEzE,IAAIF,QAAO,GAAGP,KAAK,CAACO,OAAO;IAC3B,IAAIP,KAAK,CAACO,OAAO,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;MAC5BA,QAAO,GAAGV,SAAS,CAACS,MAAM,CAACC,QAAO,CAAC;;IAGrC,IAAMG,UAAU,GAAQ,EAAE;IACzBV,KAAK,CAACG,MAAc,CAACQ,GAAG,CAAC,UAACC,WAAmB,EAAI;MAChD,IAAMT,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACR,SAAS,CAACS,MAAM,CAACM,WAAW,CAAC,CAAC;MACxDF,UAAU,CAACG,IAAI,CAACV,MAAM,CAAC;IACzB,CAAC,CAAC;IAEF,OAAO;MACLA,MAAM,EAAEO,UAAU;MAClBH,OAAO,EAAEH,IAAI,CAACC,KAAK,CAACE,QAAO,CAAC;MAC5BC,SAAS,EAAER,KAAK,CAACQ;KAClB;;AAEL;AAnCAM,OAAA,CAAAf,WAAA,GAAAA,WAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}