{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/rajde/gitrep/deploy/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/rajde/gitrep/deploy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nexport function isSubtleCryptoAvailable() {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\nexport function isNodeCryptoAvailable(withFeature) {\n  try {\n    var resolvedResult = require.resolve('crypto');\n    if (!resolvedResult) {\n      return false;\n    }\n    var cryptoModule = require('crypto');\n    if (!cryptoModule) {\n      return false;\n    }\n    if (withFeature) {\n      var features = withFeature(cryptoModule);\n      return features;\n    }\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\nexport var NO_CRYPTO_LIB = 'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\nexport function getCryptoLib() {\n  return _getCryptoLib.apply(this, arguments);\n}\nfunction _getCryptoLib() {\n  _getCryptoLib = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var nodeCrypto;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          if (!isSubtleCryptoAvailable()) {\n            _context.next = 4;\n            break;\n          }\n          return _context.abrupt(\"return\", {\n            lib: crypto.subtle,\n            name: 'subtleCrypto'\n          });\n        case 4:\n          _context.prev = 4;\n          nodeCrypto = require('crypto');\n          return _context.abrupt(\"return\", {\n            lib: nodeCrypto,\n            name: 'nodeCrypto'\n          });\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context[\"catch\"](4);\n          throw new Error(NO_CRYPTO_LIB);\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[4, 9]]);\n  }));\n  return _getCryptoLib.apply(this, arguments);\n}","map":{"version":3,"names":["isSubtleCryptoAvailable","crypto","subtle","isNodeCryptoAvailable","withFeature","resolvedResult","require","resolve","cryptoModule","features","error","NO_CRYPTO_LIB","getCryptoLib","_getCryptoLib","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","nodeCrypto","wrap","_callee$","_context","prev","next","abrupt","lib","name","t0","Error","stop"],"sources":["C:\\Users\\rajde\\gitrep\\deploy\\frontend\\node_modules\\@stacks\\encryption\\src\\cryptoUtils.ts"],"sourcesContent":["// @ts-ignore\nexport function isSubtleCryptoAvailable(): boolean {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\n\nexport function isNodeCryptoAvailable<T>(\n  withFeature: (nodeCrypto: typeof import('crypto')) => boolean | T\n): false | T;\nexport function isNodeCryptoAvailable<T>(\n  withFeature?: (nodeCrypto: typeof import('crypto')) => boolean | T\n): boolean | T {\n  try {\n    const resolvedResult = require.resolve('crypto');\n    if (!resolvedResult) {\n      return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    const cryptoModule = require('crypto') as typeof import('crypto');\n    if (!cryptoModule) {\n      return false;\n    }\n    if (withFeature) {\n      const features = withFeature(cryptoModule);\n      return features;\n    }\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport const NO_CRYPTO_LIB =\n  'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\n\nexport type TriplesecDecryptSignature = (\n  arg: { data: Uint8Array; key: Uint8Array },\n  cb: (err: Error | null, buff: Uint8Array | null) => void\n) => void;\n\nexport interface WebCryptoLib {\n  lib: SubtleCrypto;\n  name: 'subtleCrypto';\n}\n\nexport interface NodeCryptoLib {\n  lib: typeof import('crypto');\n  name: 'nodeCrypto';\n}\n\n// Make async for future version which may lazy load.\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function getCryptoLib(): Promise<WebCryptoLib | NodeCryptoLib> {\n  if (isSubtleCryptoAvailable()) {\n    return {\n      lib: crypto.subtle,\n      name: 'subtleCrypto',\n    };\n  } else {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-var-requires\n      const nodeCrypto = require('crypto') as typeof import('crypto');\n      return {\n        lib: nodeCrypto,\n        name: 'nodeCrypto',\n      };\n    } catch (error) {\n      throw new Error(NO_CRYPTO_LIB);\n    }\n  }\n}\n"],"mappings":";;AACA,OAAM,SAAUA,uBAAuBA,CAAA;EACrC,OAAO,OAAOC,MAAM,KAAK,WAAW,IAAI,OAAOA,MAAM,CAACC,MAAM,KAAK,WAAW;AAC9E;AAKA,OAAM,SAAUC,qBAAqBA,CACnCC,WAAkE;EAElE,IAAI;IACF,IAAMC,cAAc,GAAGC,OAAO,CAACC,OAAO,CAAC,QAAQ,CAAC;IAChD,IAAI,CAACF,cAAc,EAAE;MACnB,OAAO,KAAK;;IAGd,IAAMG,YAAY,GAAGF,OAAO,CAAC,QAAQ,CAA4B;IACjE,IAAI,CAACE,YAAY,EAAE;MACjB,OAAO,KAAK;;IAEd,IAAIJ,WAAW,EAAE;MACf,IAAMK,QAAQ,GAAGL,WAAW,CAACI,YAAY,CAAC;MAC1C,OAAOC,QAAQ;;IAEjB,OAAO,IAAI;GACZ,CAAC,OAAOC,KAAK,EAAE;IACd,OAAO,KAAK;;AAEhB;AAEA,OAAO,IAAMC,aAAa,GACxB,0GAA0G;AAmB5G,gBAAsBC,YAAYA,CAAA;EAAA,OAAAC,aAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAkBjC,SAAAF,cAAA;EAAAA,aAAA,GAAAG,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAlBM,SAAAC,QAAA;IAAA,IAAAC,UAAA;IAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,KACDzB,uBAAuB,EAAE;YAAAuB,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAA,OAAAF,QAAA,CAAAG,MAAA,WACpB;YACLC,GAAG,EAAE1B,MAAM,CAACC,MAAM;YAClB0B,IAAI,EAAE;WACP;QAAA;UAAAL,QAAA,CAAAC,IAAA;UAIOJ,UAAU,GAAGd,OAAO,CAAC,QAAQ,CAA4B;UAAA,OAAAiB,QAAA,CAAAG,MAAA,WACxD;YACLC,GAAG,EAAEP,UAAU;YACfQ,IAAI,EAAE;WACP;QAAA;UAAAL,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAM,EAAA,GAAAN,QAAA;UAAA,MAEK,IAAIO,KAAK,CAACnB,aAAa,CAAC;QAAA;QAAA;UAAA,OAAAY,QAAA,CAAAQ,IAAA;MAAA;IAAA,GAAAZ,OAAA;EAAA,CAGnC;EAAA,OAAAN,aAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}